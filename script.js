(function(){const e=document.getElementById('toTop');e&&(window.addEventListener('scroll',()=>{e.style.display=window.scrollY>300?'inline-flex':'none'}),e.addEventListener('click',()=>window.scrollTo({top:0,behavior:'smooth'})));function t(e){const t=e.parentElement,n=parseFloat(getComputedStyle(t).getPropertyValue('grid-auto-rows')),o=parseFloat(getComputedStyle(t).getPropertyValue('gap')),a=e.querySelector('img');if(!a)return;const d=a.getBoundingClientRect().height,i=Math.ceil((d+o)/(n+o));e.style.gridRowEnd='span '+i}function n(){document.querySelectorAll('.masonry .card').forEach(t)}function o(e){const n=e.target.closest('.card');n&&t(n)}const a=document.querySelector('.masonry');if(a){window.addEventListener('load',n),window.addEventListener('resize',n),a.querySelectorAll('img').forEach(e=>{e.complete&&o({target:e}),e.addEventListener('load',o)});const e=new ResizeObserver(n);a.querySelectorAll('.card').forEach(t=>e.observe(t))}})();