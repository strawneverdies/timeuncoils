(function(){const t=document.getElementById('toTop');t&&(window.addEventListener('scroll',()=>{t.style.display=window.scrollY>300?'inline-flex':'none'}),t.addEventListener('click',()=>window.scrollTo({top:0,behavior:'smooth'})));const e=document.getElementById('projectGrid');if(e){let t=!1,o=0;const n=[610,611,612,613,614,615,616,617,618,619];function d(){for(let d=0;d<6;d++){const i=n[(o+d)%n.length],l=document.createElement('a');l.className='card',l.href=`project${(o+d)%2+1}.html`;const a=document.createElement('img');a.src=`assets/images/cover-${i}.svg`,a.alt=`Project ${o+d+4}`;const r=document.createElement('span');r.className='title-badge',r.textContent=`Project ${o+d+4}`,l.appendChild(a),l.appendChild(r),e.appendChild(l)}o+=6}window.addEventListener('scroll',()=>{if(t)return;window.innerHeight+window.scrollY>=document.body.offsetHeight-200&&(t=!0,setTimeout(()=>{d(),t=!1},120))})}const o=document.querySelectorAll('.photo-item img'),n=document.getElementById('lightbox');if(o.length&&n){const t=document.getElementById('lb-img'),e=document.querySelector('.lb-prev'),d=document.querySelector('.lb-next'),i=document.querySelector('.lb-close'),l=document.querySelector('.lb-counter');let a=0;function r(e){a=e,n.classList.add('open'),c()}function s(){n.classList.remove('open')}function m(){a=(a+1)%o.length,c()}function p(){a=(a-1+o.length)%o.length,c()}function c(){t.src=o[a].getAttribute('data-large')||o[a].src,l.textContent=a+1+' / '+o.length}o.forEach(((t,e)=>t.addEventListener('click',(()=>r(e))))),i.addEventListener('click',s),d.addEventListener('click',m),e.addEventListener('click',p),document.addEventListener('keydown',(t=>{n.classList.contains('open')&&('Escape'===t.key&&s(),'ArrowRight'===t.key&&m(),'ArrowLeft'===t.key&&p())}));let u=0,g=0;n.addEventListener('touchstart',(t=>u=t.changedTouches[0].screenX),{passive:!0}),n.addEventListener('touchend',(t=>{g=t.changedTouches[0].screenX,g<u-40&&m(),g>u+40&&p()}),{passive:!0})}})();